<!DOCTYPE html>
<html>
<head>
    <title>Blast Down Chart</title>

    <script type="text/javascript" src="https://rally1.rallydev.com/apps/2.0rc3/sdk.js"></script>


    </script>
    <script type="text/javascript" src="../bower_components/angular/angular.min.js"></script>

    <link rel="stylesheet" type="text/css" href="../game/game.css">
    <link rel="stylesheet" type="text/css" href="../App/app.css">
    <script type="text/javascript" src="../bower_components/jquery/dist/jquery.min.js"></script>

    <script type="text/javascript" src="../bower_components/moment/min/moment.min.js"></script>
    <script type="text/javascript" src="../scripts/melonJS-1.0.1-min.js"></script>
    <script type="text/javascript" src="../game/WsapiAggregator.js"></script>
    <script type="text/javascript" src="../game/js/point.js"></script>
    <script type="text/javascript" src="../game/js/game.js"></script>
    <script type="text/javascript" src="../game/js/resources.js"></script>
    <script type="text/javascript" src="../game/js/PositionManager.js"></script>
    <script type="text/javascript" src="../game/js/ColorManager.js"></script>
    <script type="text/javascript" src="../game/js/entities/labelEntity.js"></script>
    <script type="text/javascript" src="../game/js/entities/rallyHunterEntity.js"></script>
    <script type="text/javascript" src="../game/js/entities/rallyShipEntity.js"></script>
    <script type="text/javascript" src="../game/js/entities/playerEntity.js"></script>
    <script type="text/javascript" src="../game/js/entities/shipEntity.js"></script>
    <script type="text/javascript" src="../game/js/entities/explosionEntity.js"></script>
    <script type="text/javascript" src="../game/js/entities/bulletEntity.js"></script>
    <script type="text/javascript" src="../game/js/screens/victory.js"></script>
    <script type="text/javascript" src="../game/js/screens/title.js"></script>
    <script type="text/javascript" src="../game/js/screens/play.js"></script>
    <script type="text/javascript" src="../App/App.js"></script>
    <script type="text/javascript" src="../App/angularApp.js"></script>
    <script type="text/javascript" src="../App/LookbackService.js"></script>
    <script type="text/javascript" src="../realtime/reconnecting-websocket.js"></script>
    <script type="text/javascript" src="../realtime/alm-realtime.js"></script>
    <script type="text/javascript" src="../realtime/RealtimeDataHandler.js"></script>
    <script type="text/javascript" src="../realtime/RealTimeDataService.js"></script>
    <script type="text/javascript" src="../game/GameEventHandler.js"></script>


    <script>
            Rally.launchApp('CustomApp', {
                name:"Blast Down Chart",
                parentRepos:""
            });

    </script>



    <style type="text/css">
        body{background-color:#222;color:#fff;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;-webkit-user-select:none;user-select:none;-ms-touch-action:none;touch-action:none;padding:0;margin:0;font-family:"Courier New",Courier,monospace}#screen>canvas{width:1024px;height:512px;display:block}@font-face{font-family:pressStart;src:url(../game/data/font/prstartk.ttf)}#scores{width:1024px;height:208px}#screen{width:1024px;height:512px}#log{height:512px}#historyLog{overflow:hidden}#log,#legend{margin-left:1024px;min-width:256px !important}#log>.header{height:20%;width:100%}#log>.content{height:80%;width:100%;border:none;overflow:auto}#log,#scores,#legend{color:white;font-family:"Courier New",Courier,monospace}#legend{height:208px}#scores>.content>table{margin-left:auto;margin-right:auto}#screen,#scores{float:left}.content{padding:10px}#root{display:table;position:absolute;height:100%;width:100%}.middle{display:table-cell;vertical-align:middle;width:100%}.shipContainer>img{display:block;margin-left:auto;margin-right:auto;max-height:198px}#historyLog{list-style-type:none}li{margin:0 0 5px 0}.completed{color:#0F0}.recycled{color:#E6E6E6;font-style:italic}.created{font-weight:bold}.init{font-family:pressStart;font-size:10px}#realtimeStatus{text-align:center;-webkit-border-radius:2px;-moz-border-radius:2px;border-radius:2px;min-height:20px}.waiting{background-color:#666}.connected{background-color:#0F0;color:black;font-weight:bold}.connecting{background-color:#444}.disconnected{background-color:#ED1C24}#scoreboardTable{font-size:110%}#scoreboardTable>tbody>tr>td,#scoreboardTable>thead>tr>th{padding:5px 5px;text-align:center;font-size:14px}#scoreboardTable>tbody>tr>td:first-child,#scoreboardTable>thead>tr>th:first-child{text-align:left}#scoreboardTable>thead{display:table-header-group}#mute{display:block;width:32px;height:32px}#mute>img{width:32px;height:32px}.hidden{display:none}#controls,#howItWorksButton{margin-top:5px}#controls>.column{display:table-cell;vertical-align:middle;float:left;margin-left:20px;line-height:32px}#controls>.column>select{display:inline}#overlay{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#000;filter:alpha(opacity=50);-moz-opacity:0.5;-khtml-opacity:0.5;opacity:0.5;z-index:10000}#popup{position:absolute;width:800px;top:0;left:50%;margin-left:-400px;color:black !important;background-color:white;z-index:10001;filter:alpha(opacity=100);-moz-opacity:1;-khtml-opacity:1;opacity:1;padding:10px}#popup>img{clear:both;margin:auto;display:block;width:25%}#popup h1{text-align:center}.workItemDetail{position:absolute;width:256px;color:black;background-color:white;padding:5px;-webkit-border-radius:2px;-moz-border-radius:2px;border-radius:2px}div.closePopup,div.closeInfo{text-align:center;float:right;height:26px;width:100px;background-color:#ED1C24;cursor:pointer;color:white;padding-top:4px}div.bottomCenter{float:none;margin-left:auto;margin-right:auto;display:block}.button{-webkit-border-radius:2px;-moz-border-radius:2px;border-radius:2px;margin-right:10px;float:left}h2{margin-bottom:0;padding-bottom:0}p{margin-top:0;margin-bottom:0}.detailList{clear:both;padding:0}#aboutLegend{color:white;background-color:black;padding:5px}.aboutImage{float:right;display:block;clear:right;margin:5px}#aboutLegend>div{clear:both}#initiativeImage{background-image:url('../game/data/img/new/super/superEnemy_white.png');width:256px;height:64px}#featureImage{background-image:url('../game/data/img/new/large/largeEnemy_white.png');width:64px;height:32px}#storyImage{background-image:url('../game/data/img/new/medium/mediumEnemy_white.png');width:32px;height:32px}#taskImage{background-image:url('../game/data/img/new/small/smallEnemy_white.png');width:16px;height:16px}#aboutLegend>hr{clear:both;border:0;border-bottom:1px dashed #fff;background:#000}.scoreboardToggleOption{display:inline}.scoreboardToggleOption.hidden{display:none}#scoreboardToggle{-webkit-border-radius:2px;-moz-border-radius:2px;border-radius:2px;color:black;background-color:white;cursor:pointer}#howItWorksButton{-webkit-border-radius:2px;-moz-border-radius:2px;border-radius:2px;color:black;background-color:white;font-style:bold;text-align:center;cursor:pointer}
    </style>
    <style type="text/css">
        .x-body{min-height:720px;min-width:1280px;background-image:url('../game/data/img/new/blastDownBackground.png');background-repeat:no-repeat;background-position:center;background-color:white}td.dataColumn{text-align:center}
    </style>
</head>
<body>
    <div style="display:none;" ng-controller="dataController" id="root">
    <div class="middle">
        <div id="spaceInvadersContainer">
            <div>
                <div id="scores">
                    <div class="content">
                        <table id="scoreboardTable">
                            <thead>
                                <tr>
                                    <th>
                                        Team
                                    </th>
                                    <th ng-repeat="(teamName, teamInfo) in scoreboard" style="color: {{teamInfo.color}}">
                                        {{teamName}}
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td class="dataColumnHeader">
                                        Points
                                    </td>
                                    <td class="dataColumnHeader hidden">
                                        Count
                                    </td>
                                    <td class="dataColumn" ng-repeat="(teamName, teamInfo) in scoreboard" style="color: {{teamInfo.color}}">
                                        {{teamInfo.points}}
                                    </td>
                                    <td class="dataColumn hidden" ng-repeat="(teamName, teamInfo) in scoreboard" style="color: {{teamInfo.color}}">
                                        {{teamInfo.completed}}
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div id="legend">
                    <div class="content">
                        <div class="shipContainer logo">
                            <img src="../game/data/img/new/blastDownBackground.png">
                        </div>
                    </div>
                </div>
            </div>
            <div>
                <div id="screen">
                </div>
                
                <div id="log">
                    <div class="header">
                        <div id="realtimeStatus" class="{{realtimeStatus.toLowerCase()}}">
                            Realtime Status: {{realtimeStatus}}
                        </div>
                        <div id="controls" class="hidden">
                            <div id="playPause" class="column">
                                <img src="../images/play.png" id="playIcon" class="hidden" alt="Play" title="Play Icon">
                                <img src="../images/pause.png" id="pauseIcon" alt="Pause" title="Pause Icon">
                            </div> 
                            <div id="mute" class="column">
                                <img src="../images/muteIcon.png" id="muteIcon" class="hidden" alt="Mute_Icon.svg" title="Mute icon">
                                <img src="../images/speakerIcon.png" id="speakerIcon" alt="Speaker_Icon.svg" title="Unmute/speaker icon">
                            </div> 
                            <div class="column">Speed:
                                <select id="speed">
                                    <option value="1">1</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5" selected="selected">5</option>
                                    <option value="6">6</option>
                                    <option value="7">7</option>
                                    <option value="8">8</option>
                                    <option value="9">9</option>
                                    <option value="10">10</option>
                                </select>
                            </div>
                            <div class="column">Filter Log:
                                <select ng-model="selectedOption" ng-change="setSelectedOption(selectedOption)" id="filterEvents">
                                  <option value="">All</option>
                                  <option value="created">Created</option>
                                  <option value="completed">Completed</option>
                                  <option value="recycled">Recycled</option>
                                </select>
                            </div>
                            <div id="scoreboardToggle" class="column">
                                Score:
                                <div id="scoreByPoints" class="scoreboardToggleOption">by points</div>
                                <div id="scoreByCount" class="scoreboardToggleOption hidden">by count</div>
                            </div> 
                        </div>
                        <div id="howItWorksButton">How it Works</div>
                    </div>
                    <div class="content">
                        <ul id="historyLog">
                          <li ng-repeat="logItem in logItems | filter:filters" class="{{logItem.applyClass}}">{{logItem.note}}</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
        <div id="howItWorks" class="hidden">
            <div id="popup">
                <div class="closePopup button">close</div>
                <img src="../game/data/img/new/blastDownBackground.png" alt="Blast Down Chart">
                <h1>How it Works</h1>
                <h2>What is it?</h2>
                <p>The Blast Down Cart is a Portfolio Item visualization for your data in Rally.  The Blast Down chart shows the enitre history of a Rally Initiative, and is a fun tool to reward your efforts in realtime.</p>
                <h2>How can we use it?</h2>
                <p>We suggest you use it in a few ways:
                    <ul list-style-type="square">
                        <li>To see the entire history of a completed work item</li>
                        <li>To display while teams work as part of a dashboard - as they complete work in Rally, it will be destroyed in the Blast Down Chart!</li>
                    </ul>
                </p>
                <h2>What do the aliens mean?</h2>
                <p>Each of the different types of alien ships represents a different piece of data in the Initiative you select.  If you ever wonder what an alien represents, just click on it - this will bring up a window with the information for that work item. The larger the alien, the larger the work item.  Here is the exact correlation:
                <div id="aboutLegend">
                    <div>Initiative<div class="aboutImage" id="initiativeImage"></div></div>
                    <hr />
                    <div>Feature<div class="aboutImage" id="featureImage"></div></div>
                    <hr />
                    <div>User Story<div class="aboutImage" id="storyImage"></div></div>
                    <hr />
                    <div>Task<div class="aboutImage" id="taskImage"></div></div>
                </div>
                </p>
                <p>The aliens on the screen are colored according to their realtionship - Features are assigned a color, and the stories or tasks that are parented to that feature in Rally are given the same color.
                </p>
                <h2>What do the ships mean?</h2>
                <p>The ships at the bottom represent the teams, and their colors correlate to the score in the scoreboard.</p>
                <h2>How does scoring work?</h2>
                <p>Scores are calcuated using story points for each story that is completed.  If a story has no points assigned, the team will get no points for completing it.  You can also switch the scoreboard to report scores in terms of the number of stories completed, if you prefer.</p>
                <h1>We hope you enjoy this new way to visualize your data in Rally!</h1>
                <div class="closePopup bottomCenter button">close</div>
            </div>
        </div>
        <div id="overlay" class="hidden"></div>
</body>
</html>
